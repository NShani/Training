
CREATE SCHEMA IF NOT EXISTS `SubsriptionPlanTest` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
use SubsriptionPlanTest;

CREATE TABLE IF NOT EXISTS SubscriptionPlan (
    PLAN_NAME   VARCHAR(200) NOT NULL,
    TEAM        INT NOT NULL,	
    MAX_GEARS	INT NOT NULL,
    PRIMARY KEY (PLAN_NAME)
);

CREATE TABLE IF NOT EXISTS Gears (
    GEAR_NAME        VARCHAR(200) NOT NULL,
    CPU              INT NOT NULL,	
    MEMORY	     INT NOT NULL,
    STORAGE	     INT NOT NULL,
    COST_PER_HOUR    INT NOT NULL,
    PRIMARY KEY (GEAR_NAME)
);

CREATE TABLE IF NOT EXISTS SubscriptionInformation (
    PLAN_ID        INT NOT NULL AUTO_INCREMENT,
    PLAN_NAME           VARCHAR(200) NOT NULL,	
    STATUS         boolean NOT NULL,
    PRIMARY KEY (PLAN_ID),
    FOREIGN KEY (PLAN_NAME) REFERENCES SubscriptionPlan(PLAN_NAME)
);

CREATE TABLE IF NOT EXISTS Subscribe (
    PLAN_ID          INT NOT NULL,
    TENANT_ID        VARCHAR(200) NOT NULL,	
    START_DATE	     DATE NOT NULL,
    PRIMARY KEY (PLAN_ID),
    FOREIGN KEY (PLAN_ID) REFERENCES SubscriptionInformation(PLAN_ID)
);

CREATE TABLE IF NOT EXISTS AssignedGearInformation (
    GEAR_ID          	INTEGER NOT NULL AUTO_INCREMENT,
    NAME        	VARCHAR(200),  
    TYPE		VARCHAR (200),
    PLAN_ID             INT NOT NULL, 
    PRIMARY KEY (GEAR_ID),
    FOREIGN KEY (PLAN_ID) REFERENCES SubscriptionInformation(PLAN_ID)
);

CREATE TABLE IF NOT EXISTS PlanGears (
    PLAN_NAME   VARCHAR(200) NOT NULL,
    GEAR1       VARCHAR(200),	
    GEAR2	VARCHAR(200),
    GEAR3	VARCHAR(200),
    PRIMARY KEY (PLAN_NAME),
    FOREIGN KEY (PLAN_NAME) REFERENCES SubscriptionPlan (PLAN_NAME),
    FOREIGN KEY (GEAR1) REFERENCES Gears (GEAR_NAME),
    FOREIGN KEY (GEAR2) REFERENCES Gears (GEAR_NAME),
    FOREIGN KEY (GEAR3) REFERENCES Gears (GEAR_NAME)
);

INSERT INTO SubscriptionPlan (PLAN_NAME ,TEAM , MAX_GEARS) VALUES ("Free",10,6);
INSERT INTO SubscriptionPlan (PLAN_NAME ,TEAM , MAX_GEARS) VALUES ("PAID_SMALL",20,30);
INSERT INTO SubscriptionPlan (PLAN_NAME ,TEAM , MAX_GEARS) VALUES ("PAID_MEDIUM",100,100);

INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("t2.small",1,2,4,1);
INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("t2.medium",2,4,8,2);
INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("t2.large",4,8,16,4);
INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("m2.small",2,2,4,2);
INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("m2.medium",3,4,8,4);
INSERT INTO Gears (GEAR_NAME , CPU , MEMORY , STORAGE , COST_PER_HOUR) VALUES ("m2.large",4,8,16,6);


INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("FREE",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("PAID_SMALL",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("FREE",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("PAID_SMALL",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("FREE",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("FREE",true);
INSERT INTO SubscriptionInformation (PLAN_NAME , STATUS ) VALUES ("PAID_MEDIUM",true);

INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (1,"00001","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (2,"00002","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (3,"00005","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (4,"00004","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (5,"00003","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (6,"00008","2012-04-18");
INSERT INTO Subscribe (PLAN_ID, TENANT_ID ,START_DATE ) VALUES (7,"00006","2012-04-18");

INSERT INTO PlanGears (PLAN_NAME, GEAR1 ,GEAR2 ,GEAR3 ) VALUES ("FREE","t2.small","t2.medium","m2.small");
INSERT INTO PlanGears (PLAN_NAME, GEAR1 ,GEAR2 ,GEAR3 ) VALUES ("PAID_SMALL","t2.small","t2.medium","m2.medium");
INSERT INTO PlanGears (PLAN_NAME, GEAR1 ,GEAR2 ,GEAR3 ) VALUES ("PAID_MEDIUM","m2.small","m2.medium","m2.large");

INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("t2.small","app","1");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("m2.Medium","db","1");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("t2.small","app","2");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("m2.medium","app","2");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("t2.small","app","3");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("t2.small","app","5");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("t2.medium","app","6");
INSERT INTO AssignedGearInformation (NAME , TYPE , PLAN_ID ) VALUES ("m2.large","app","7");
