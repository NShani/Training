#!/bin/bash
# ----------------------------------------------------------------------------
#  Copyright 2005-2013 WSO2, Inc. http://www.wso2.org
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
# ----------------------------------------------------------------------------

# Pack files
export CONFIG_MB="true"
export ACTIVE_MQ_DISTRIBUTION=apache-activemq-5.9.1-bin.tar.gz # Relavent activemq distribution
export ACTIVE_MQ_EXTRACTED=apache-activemq-5.9.1 # Extracted activemq distribution folder name

export JAVA_FILE_DISTRUBUTION=jdk-7u51-linux-x64.tar.gz # Relevant JDK distribution
export JAVA_NAME_EXTRACTED=jdk1.7.0_51 # Extracted JDK folder name

export MYSQL_CONNECTOR=mysql-connector-java-5.1.29-bin.jar # Relevant MySQL connector

# General configuration
export JAVA_HOME=/opt/java
export log_path=<%= @private_paas_home%>/log/apache-stratos
export stratos_domain="<%= @stratos_domain %>"
export machine_ip="<%= @server_ip %>"
export host_user="<%= @owner%>"
export stratos_pack_path="<%= @local_package_dir%>"
export SLEEPTIME=30
export offset=<%= @offset%>
export PPAAS_PORT=<%= 9443 + Integer(@offset) %>
export BAM_PORT=<%= 9444 + Integer(@offset) %>
export IS_PORT=<%= 9445 + Integer(@offset) %>
export CEP_PORT=<%= 9446 + Integer(@offset) %>
export GITBLIT_PORT=<%= 9418 + Integer(@offset) %>

# Puppet master configuration
export skip_puppet=""
export puppet_external="y"
export puppet_external_ip="<%= @ppaas_puppetmaster_ip %>"
export puppet_external_host="<%= @ppaas_puppetmaster_host %>"

# cep as a separate profile
export separate_cep="n"

# IaaS configuration
export iaas="<%= @iaas %>"
# Region Name
export region="<%= @iaas_region %>"
# Cartridge base image
export cartridge_base_img_id="<%= @iaas_cartridge_image %>"

# OpenStack
export os_identity="<%= @os_identity %>"
export os_credentials="<%= @os_credentials %>"
export os_jclouds_endpoint="<%= @os_jclouds_endpoint %>"
export os_keypair_name="<%= @os_keypair_name %>"
export os_security_groups="<%= @os_security_groups %>"

# EC2
export ec2_vpc=""
export ec2_identity=""
export ec2_credentials=""
export ec2_owner_id=""
export ec2_keypair_name=""
export ec2_security_groups=""
export ec2_availability_zone=""
export ec2_security_group_ids=""
export ec2_subnet_id=""
export ec2_associate_public_ip_address="true"

# vCloud
export vcloud_identity=""
export vcloud_credentials=""
export vcloud_jclouds_endpoint=""

# MySQL configuration
export setup_mysql="n"
export mysql_host="<%= @ppaas_mysql_host %>"
export mysql_port="<%= @ppaas_mysql_port %>"
export mysql_uname="<%= @ppaas_mysql_uname %>"
export mysql_password="<%= @ppaas_mysql_password %>"

#/etc/hosts mapping
export using_etc_host_mapping="y"

# WSO2 PPaaS services
export as_enabled="y"
export bps_enabled="n"
export esb_enabled="n"
export is_enabled="n"
export apim_enabled="n"

# Worker Manager deployment
export as_worker_mgt_enabled="n"
export bps_worker_mgt_enabled="n"
export esb_worker_mgt_enabled="n"
export is_worker_mgt_enabled="n"

# Clustering of services
export as_clustering_enabled="n"
export is_clustering_enabled="n"
export esb_clustering_enabled="n"
export bps_clustering_enabled="n"
export keymanager_clustering_enabled="n"

# WSO2 PPaaS core services
export bam_enabled="n"
export config_sso_enabled="n"
export using_dns="n"
export wso2_ppaas_enabled="n"
